<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Mini App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #121212;
      color: #eee;
    }
    input, button {
      font-size: 16px;
      padding: 8px;
      margin-right: 8px;
      border-radius: 4px;
      border: none;
    }
    input {
      width: 250px;
    }
    button {
      background-color: #1e90ff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #1c86ee;
    }
  </style>
</head>
<body>
  <h2>Mini App</h2>
  <input id="message" type="text" placeholder="Напиши сообщение" />
  <button id="sendBtn">Отправить боту</button>

  <script>
    // Проверяем, что WebApp объект доступен
    if (!window.Telegram?.WebApp) {
      alert("WebApp API недоступен! Запустите мини апп через Telegram.");
      throw new Error("WebApp API недоступен");
    }
    
    const tg = window.Telegram.WebApp;

    document.getElementById("sendBtn").addEventListener("click", () => {
      const message = document.getElementById("message").value.trim();
      if (!message) {
        alert("Введите сообщение");
        return;
      }
      // Отправляем данные в бота
      tg.sendData(JSON.stringify({ message }));

      // Можно закрыть мини апп после отправки, если нужно
      // tg.close();

      alert("Сообщение отправлено");
    });
  </script>
</body>
</html>
