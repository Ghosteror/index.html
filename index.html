import asyncio
from aiogram import Bot, Dispatcher
from aiogram.types import (
    Message,
    InlineKeyboardMarkup,
    InlineKeyboardButton,
    WebAppInfo
)
from aiogram.filters import CommandStart

# === –ù–ê–°–¢–†–û–ô–ö–ò ===
BOT_TOKEN = "8377825030:AAE8lkaHScj1lJYxSiFhvJCffhn2sb8uf5M"
WEBAPP_URL = "https://ghosteror.github.io/index.html/"

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()


def main_kb():
    return InlineKeyboardMarkup(
        inline_keyboard=[
            [
                InlineKeyboardButton(
                    text="üßÅ –û—Ç–∫—Ä—ã—Ç—å –≤–∏—Ç—Ä–∏–Ω—É",
                    web_app=WebAppInfo(url=WEBAPP_URL)
                )
            ]
        ]
    )


@dp.message(CommandStart())
async def start(message: Message):
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! –û—Ç–∫—Ä—ã–≤–∞–π –≤–∏—Ç—Ä–∏–Ω—É üëá",
        reply_markup=main_kb()
    )


@dp.message(lambda m: m.web_app_data is not None)
async def handle_webapp(message: Message):
    data = message.web_app_data.data

    await message.answer(
        "üßÅ –ù–û–í–´–ô –ó–ê–ö–ê–ó\n\n"
        f"{data}"
    )


async def main():
    await dp.start_polling(bot)


if __name__ == "__main__":
    asyncio.run(main())
